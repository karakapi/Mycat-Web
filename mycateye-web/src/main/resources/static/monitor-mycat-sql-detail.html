<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SQL执行详情</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Responsive Website Template">

    <link href="assets/css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/elegant-icons.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="assets/css/jquery.mloading.css" />
    <link rel="stylesheet" href="assets/css/jquery.dataTables.min.css">
    <link href="assets/css/main.css" rel="stylesheet" type="text/css">
    <link href="assets/css/my-custom-styles.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div id="wrapper">
        <!-- 导航 -->
        <nav class="navbar navbar-default navbar-fixed-top ">
            <div class="container">
                <a href="index.html" class="navbar-brand">
                    <img src="assets/img/logo/logo_80.png" style="width: 80px; height: 46px;">
                </a>
                <div id="main-nav-collapse" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav main-navbar-nav">
                        <li class="dropdown">
                            <a href="index.html" class="dropdown-toggle" data-toggle="dropdown">首页</a>
                        </li>
                        <li class="dropdown">
                            <a href="mysql-mycnf.html" class="dropdown-toggle" data-toggle="dropdown">my.cnf生成工具</a>
                        </li>
                        <li class="dropdown ">
                            <a href="mysql-cluster.html" class="dropdown-toggle" data-toggle="dropdown">集群管理</a>
                        </li>
                        <!--<li class="dropdown">-->
                            <!--<a href="mysql-performance-monitor.html" class="dropdown-toggle" data-toggle="dropdown">性能监控</a>-->
                        <!--</li>-->
                        <li class="dropdown active">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                Mycat监控 <i class="fa fa-angle-down"></i>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="monitor-mycat.html">服务监控</a></li>
                                <li class="active"><a href="monitor-mycat-sql-execute.html">SQL执行情况</a></li>
                                <li><a href="monitor-mycat-sql.html">SQL性能监控</a></li>
                                <li><a href="monitor-mycat-sqlsum.html">SQL统计</a></li>
                                <li><a href="monitor-mycat-datanode.html">数据节点</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                Mysql监控 <i class="fa fa-angle-down"></i>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="mysql-sql-monitor.html">SQL监控</a></li>
                                <li><a href="mysql-slow-monitor.html">慢查询SQL</a></li>
                                <li><a href="mysql-performance-monitor.html">性能监控</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="mysql-health-check.html" class="dropdown-toggle" data-toggle="dropdown">健康检查</a>
                        </li>
                        <li class="dropdown">
                            <a target="_blank" href="admin/index.html" class="dropdown-toggle" data-toggle="dropdown">控制台</a>
                        </li>
                        <li class="dropdown">
                            <div class="btn-group" style="margin-top: 18px; margin-left: 40px;">
                                <button type="button" class="btn btn-default" id="defaultNode">选择节点</button>
                                <button type="button" class="btn btn-default dropdown-toggle"
                                        data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false">
                                    <span class="caret"></span>
                                    <span class="sr-only">Toggle Dropdown</span>
                                </button>
                                <ul class="dropdown-menu" id="nodeUl">
                                </ul>
                            </div>
                            <input type="hidden" id="defaultServerId" value="" />
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- END 导航 -->

        <!-- 内容 -->
        <section>
            <div class="container">
                <ol class="breadcrumb" style="font-size: 14px;">
                    <li><a href="index.html">首页</a></li>
                    <li><a href="monitor-mycat.html">Mycat 监控</a></li>
                    <li><a id="prevPage" href="monitor-mycat-sql-execute.html">SQL执行情况</a></li>
                    <li class="active">SQL执行详情</li>
                </ol>
            </div>

            <div class="container">
                <table id="mycat-sql-execute" class="display mydatatable" style="width:100%">
                    <thead>
                        <tr>
                            <th>DATA_SOURCE</th>
                            <th>EXECUTE</th>
                            <th>TIME</th>
                            <th>LAST_EXECUTE_TIMESTAMP</th>
                            <th>LAST_TIME</th>
                        </tr>
                    </thead>

                </table>
            </div>
        </section>
        <!-- END 内容 -->

        <!-- 页脚 -->
        <footer class="footer-newsletter">
            <div class="container">

                <div class="footer-bottom">
                    <div class="left">

                        <p class="copyright-text">&copy;2017 MyCAT EYE</p>
                    </div>

                </div>
            </div>
        </footer>
        <!-- END 页脚 -->
    </div>

    <div class="fakeloader"></div>
    <!-- JAVASCRIPT -->
    <script src="assets/js/jquery-3.1.1.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/plugins/easing/jquery.easing.min.js"></script>
    <script src="assets/js/plugins/morphext/morphext.min.js"></script>
    <script src="assets/js/plugins/owl-carousel/owl.carousel.min.js"></script>
    <script src="assets/js/bravana-lite.js"></script>
    <script src="assets/js/echarts.common.min.js"></script>
    <!-- DataTables -->
    <script src="assets/js/jquery.dataTables.min.js"></script>
    <script src="assets/js/dataTables.bootstrap.min.js"></script>

    <!-- loading效果 -->
    <script src="assets/js/jquery.mloading.js"></script>
    <!-- 置顶悬浮图标 -->
    <div class="float-container float"><a href="javascript:$(window).scrollTop(0, 0);"><img src="assets/img/top.gif" style="border:0px;" /></a></div>

    <!-- 自定义JAVASCRIPT -->
    <script src="assets/js/misc-util.js"></script>
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/monitor/mycat.js"></script>
    <script>
        $(function () {
            var sql_id = getParameter('sql_id'),sid = getParameter('server_id'),tr = getParameter('timeRange'),backurl = 'monitor-mycat-sql-execute.html',backparam='';

            if(sid){
                backparam += '&server_id='+sid;
            }
            if(tr){
                //tr = decodeURIComponent(tr);
                backparam += '&timeRange='+tr;
            }
            if(backparam!='') {
                backparam = '?'+backparam.slice(1);
            }
            $('#prevPage').attr('href',backurl+backparam);

            $('#mycat-sql-execute').DataTable({
                'ajax': '/mycat/sql/detail?server_id='+sid+'&sql_id='+sql_id,
                'columns': [
                    {'data': 'dataSource'},
                    {'data': 'execute'},
                    {'data': 'time'},
                    {'data': 'lastExecuteTimestamp'},
                    {'data': 'lastTime'}
                ]
            });

        });
    </script>
</body>
</html>